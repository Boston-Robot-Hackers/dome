launch:
  - arg:
      name: 'camera'
      default: 'false'
      description: 'launch camera?'
  - arg:
      name: 'lidar'
      default: 'true'
      description: 'Launch lidar?'
  - arg:
      name: 'imu_apply'
      default: 'true'
      description: 'Launch imu correction?'
  - arg:
      name: 'joy'
      default: "false"
      description: 'Launch joystick support?'
  - arg:
      name: 'panel'
      default: "true"
      description: 'Launch status panel'

  - include:
      file: "$(find-pkg-share linorobot2_bringup)/launch/bringup.launch.py"
      arg:
        - name: base_serial_port
          value: "/dev/esp32"
        - name: micro_ros_baudrate
          value: "921600"
        - name: madgwick
          value: "true"
        - name: orientation_stddev
          value: "0.01"
        - name: madgwick_imu_topic
          value: '/imu/corrected_data'
        - name: joy
          value: "$(var joy)"

  - include:
      file: "$(find-pkg-share foxglove_bridge)/launch/foxglove_bridge_launch.xml"

  - include:
      file: "$(find-pkg-share dome)/launch/imu_apply.launch.py"
      if: "$(var imu_apply)"

  - node:
      pkg: status_panel
      exec: status_panel_node
      name: status_panel_node
      output: screen
      if: "$(var panel)"
